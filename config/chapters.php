<?php
/**
 * Expreso a Oriente - Chapter Registry
 * Maps chapter IDs to slugs, metadata, and layout type.
 * Order is chronological (0 = oldest, 16 = newest).
 */

$chapters = [
    [
        'id'       => '0',
        'slug_es'  => 'prologo',
        'slug_en'  => 'prologue',
        'json_es'  => '0-prologo',
        'json_en'  => '0-prologue',
        'date'     => '2012-06-10',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/0-prologo.jpg'
    ],
    [
        'id'       => '1',
        'slug_es'  => 'occupy-frankfurt',
        'slug_en'  => 'occupy-frankfurt',
        'json_es'  => '1-occupy-frankfurt',
        'json_en'  => '1-occupy-frankfurt',
        'date'     => '2012-06-14',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/1-occupy-frankfurt.jpg'
    ],
    [
        'id'       => '2',
        'slug_es'  => 'becoming-berlin',
        'slug_en'  => 'becoming-berlin',
        'json_es'  => '2-becoming-berlin',
        'json_en'  => '2-becoming-berlin',
        'date'     => '2012-06-21',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/2-becoming-berlin.jpg'
    ],
    [
        'id'       => '3',
        'slug_es'  => 'desprejuicios',
        'slug_en'  => 'three-versions-of-poland',
        'json_es'  => '3-desprejuicios',
        'json_en'  => '3-three-versions-of-poland',
        'date'     => '2012-07-03',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/3-desprejuicios.jpg'
    ],
    [
        'id'       => '4',
        'slug_es'  => 'los-balticos',
        'slug_en'  => 'the-baltics',
        'json_es'  => '4-los-balticos',
        'json_en'  => '4-the-baltics',
        'date'     => '2012-07-15',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/4-los-balticos.jpg'
    ],
    [
        'id'       => '5',
        'slug_es'  => 'la-dacha',
        'slug_en'  => 'the-dacha',
        'json_es'  => '5-la-dacha',
        'json_en'  => '5-the-dacha',
        'date'     => '2012-07-26',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/5-la-dacha.jpg'
    ],
    [
        'id'       => '6',
        'slug_es'  => 'rusia',
        'slug_en'  => 'russia',
        'json_es'  => '6-rusia',
        'json_en'  => '6-russia',
        'date'     => '2012-08-07',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/6-rusia.jpg'
    ],
    [
        'id'       => '7',
        'slug_es'  => 'los-romanov',
        'slug_en'  => 'the-romanovs',
        'json_es'  => '7-los-romanov',
        'json_en'  => '7-the-romanovs',
        'date'     => '2012-09-01',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/7-los-romanov.jpg'
    ],
    [
        'id'       => '8',
        'slug_es'  => 'los-pascal-jenny',
        'slug_en'  => 'the-pascal-jenny',
        'json_es'  => '8-los-pascal-jenny',
        'json_en'  => '8-the-pascal-jenny',
        'date'     => '2012-09-12',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/8-los-pascal-jenny.jpg'
    ],
    [
        'id'       => '9',
        'slug_es'  => 'mongolia-primera-parte',
        'slug_en'  => 'mongolia-part-one',
        'json_es'  => '9-mongolia-primera-parte',
        'json_en'  => '9-mongolia-part-one',
        'date'     => '2012-10-01',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/9-mongolia-primera-parte.jpg'
    ],
    [
        'id'       => '10',
        'slug_es'  => 'mongolia-segunda-parte',
        'slug_en'  => 'mongolia-part-two',
        'json_es'  => '10-mongolia-segunda-parte',
        'json_en'  => '10-mongolia-part-two',
        'date'     => '2012-10-09',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/10-mongolia-segunda-parte.jpg'
    ],
    [
        'id'       => '11',
        'slug_es'  => 'china',
        'slug_en'  => 'china',
        'json_es'  => '11-china',
        'json_en'  => '11-china',
        'date'     => '2012-10-30',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/11-china.jpg'
    ],
    [
        'id'       => '11bis',
        'slug_es'  => 'la-bienvenida',
        'slug_en'  => 'the-welcome',
        'json_es'  => '11bis-la-bienvenida',
        'json_en'  => '11bis-the-welcome',
        'date'     => '2012-11-05',
        'layout'   => 'full',
        'hero'     => 'chapters/11bis-la-bienvenida.jpg'
    ],
    [
        'id'       => '12',
        'slug_es'  => 'myanmar',
        'slug_en'  => 'myanmar',
        'json_es'  => '12-myanmar',
        'json_en'  => '12-myanmar',
        'date'     => '2012-11-25',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/12-myanmar.jpg'
    ],
    [
        'id'       => '13',
        'slug_es'  => 'india',
        'slug_en'  => 'india',
        'json_es'  => '13-india',
        'json_en'  => '13-india',
        'date'     => '2012-12-26',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/13-india.jpg'
    ],
    [
        'id'       => '14',
        'slug_es'  => 'varanasi',
        'slug_en'  => 'varanasi',
        'json_es'  => '14-varanasi',
        'json_en'  => '14-varanasi',
        'date'     => '2013-01-03',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/14-varanasi.jpg'
    ],
    [
        'id'       => '15',
        'slug_es'  => 'medio-oriente',
        'slug_en'  => 'middle-east',
        'json_es'  => '15-medio-oriente',
        'json_en'  => '15-middle-east',
        'date'     => '2013-01-27',
        'layout'   => 'sidebar',
        'hero'     => 'chapters/15-medio-oriente.jpg'
    ],
    [
        'id'       => '16',
        'slug_es'  => 'fin',
        'slug_en'  => 'the-end',
        'json_es'  => '16-fin',
        'json_en'  => '16-the-end',
        'date'     => '2013-03-13',
        'layout'   => 'full',
        'hero'     => 'chapters/16-fin.jpg'
    ]
];

/**
 * Find a chapter by its slug in a given language
 */
function find_chapter_by_slug($slug, $lang) {
    global $chapters;
    $key = 'slug_' . $lang;
    foreach ($chapters as $index => $ch) {
        if ($ch[$key] === $slug) {
            $ch['_index'] = $index;
            return $ch;
        }
    }
    return null;
}

/**
 * Get previous chapter (or null if first)
 */
function get_prev_chapter($index) {
    global $chapters;
    return $index > 0 ? $chapters[$index - 1] : null;
}

/**
 * Get next chapter (or null if last)
 */
function get_next_chapter($index) {
    global $chapters;
    return $index < count($chapters) - 1 ? $chapters[$index + 1] : null;
}
